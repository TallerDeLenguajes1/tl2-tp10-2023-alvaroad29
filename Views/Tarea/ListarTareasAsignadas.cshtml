@{
    ViewData["Title"] = "Tareas"; // titulo de la pesta√±a
}
@using tl2_tp10_2023_alvaroad29.ViewModels

@model ListarTareasAsignadasViewModel

<div class="card">
    @* <div class="card-header">
         <h2>Tareas</h2>
    </div> *@
    <div class="card-header text-center">
        <h4>
             <i class="bi bi-clipboard-data-fill"></i>
             @Model.NombreTablero
             
        </h4>
        <h4>
            <i class="bi bi-person-fill"></i>
            Usuario propietario : @Model.UsuarioPropietario
        </h4>
    </div>
    <div class="card-body">
        <table class="display nowrap table-striped" style="width:100%" id="myTable">
            <thead>
                <tr>
                    <th></th>
                    <th>Nombre</th>
                    <th>Descripcion</th>
                    <th>Color</th>
                    <th>Usuario asignado</th>
                    <th>Estado</th>
                    <th hidden>ID</th> <!-- oculto el id--->
                    <th hidden>Id tablero</th>
                    <th hidden></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var t in Model.TareasVM)
                {
                    <tr>
                        <td></td>
                        <td>@t.Nombre</td>
                        <td>@t.Descripcion</td>
                        <td> <i class="bi bi-droplet-fill" style="color: @t.Color"></i></td>
                        <td>@t.NombreUsuarioAsignado</td>
                        
                        @if(t.Modificable == true)
                        {
                            <td>
                                <form id="cambiarEstadoForm_@t.Id" asp-controller="Tarea" asp-action="UpdateEstado">
                                    <input type="hidden" name="idTablero" value="@t.Id_tablero">
                                    <input type="hidden" name="id" value="@t.Id" />
                                    <div class="input-group">
                                        <select asp-for="@t.Estado" class="form-select form-control" asp-items="@Html.GetEnumSelectList<EstadoTarea>()" name="estado" onchange="enviarFormulario('cambiarEstadoForm_@t.Id')">
                                        </select>
                                    </div>
                                </form>
                            </td>
                        }else{
                            <td>@t.Estado</td>
                        }
                        <td hidden>@t.Id</td>
                        <td hidden>@t.Id_tablero</td>
                        <td hidden>@t.Estado</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
<script src="~/js/site2.js"></script>

